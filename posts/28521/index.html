<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>我的Emacs配置 | 常想一二，不思八九</title><meta name="author" content="even629"><meta name="copyright" content="even629"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="我的Emacs的一些配置，主要支持c&#x2F;c++,rust,asm编写和一些常用文件的高亮支持">
<meta property="og:type" content="article">
<meta property="og:title" content="我的Emacs配置">
<meta property="og:url" content="https://even629.com/posts/28521/index.html">
<meta property="og:site_name" content="常想一二，不思八九">
<meta property="og:description" content="我的Emacs的一些配置，主要支持c&#x2F;c++,rust,asm编写和一些常用文件的高亮支持">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://even629.com/images/emacs_cover.png">
<meta property="article:published_time" content="2025-01-12T11:36:13.000Z">
<meta property="article:modified_time" content="2025-12-15T12:33:13.000Z">
<meta property="article:author" content="even629">
<meta property="article:tag" content="GNU">
<meta property="article:tag" content="tools">
<meta property="article:tag" content="emacs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://even629.com/images/emacs_cover.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://even629.com/posts/28521/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><meta name="baidu-site-verification" content="codeva-g8sPzVXu98"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"中"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '我的Emacs配置',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel='preload', href='/img/avatar.png', as='image'><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/custom_card_author.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/right_menu.css"><link rel="stylesheet" href="/css/nav.css"><link rel="stylesheet" href="/css/newYear.css"><link rel="stylesheet" href="/css/music.css"><link rel="stylesheet" href="/css/beautify_label_h.css"><link rel="stylesheet" href="/css/equipment.css"><link rel="stylesheet" href="/css/liquid_glass.css"><link rel="stylesheet" href="/css/tag_plugin_plus.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.0.6/swiper-bundle.min.css"><span id="fps"></span><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="/css/wow_animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="常想一二，不思八九" type="application/atom+xml">
</head><body><div class="float-box left top"></div><div class="float-box left bottom"></div><div class="float-box right top"></div><div class="float-box right bottom"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg" style="background-image: url(/img/12bb_background.png);"></div><div id="an_music_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">90</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">72</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/charts/"><i class="fa-fw fas fa-solid fa-chart-simple"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-heart"></i><span> 分享</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-toolbox"></i><span> 装备</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-solid fa-link"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-solid fa-comments"></i><span> 留言</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-language"></i><span> 语言</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/en/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="/"><i class="fa-fw fas fa-c"></i><span> 中文</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/images/emacs_top_image.png);"><nav class="liquidGlass-wrapper" id="nav" style="--glass-border-radius: 2rem;"><div class="liquidGlass-effect"></div><div class="liquidGlass-tint"></div><div class="liquidGlass-shine"></div><div class="liquidGlass-box" style="display:flex;align-items:center;justify-content:center;width:100%"><!-- 左侧博客信息区域--><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.png" alt="Logo"></a></span><!-- 新增的导航菜单容器（居中布局关键）--><div id="nav-menus-container"><!-- 菜单主体部分--><div id="menus"><!-- 菜单项--><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/charts/"><i class="fa-fw fas fa-solid fa-chart-simple"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-heart"></i><span> 分享</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-toolbox"></i><span> 装备</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-solid fa-link"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-solid fa-comments"></i><span> 留言</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-language"></i><span> 语言</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/en/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="/"><i class="fa-fw fas fa-c"></i><span> 中文</span></a></li></ul></div></div><!-- 显示当前标题名称--><center id="name-container"><a id="page-name" href="javascript:rmf.scrollToTop()">常想一二，不思八九</a></center></div></div><!-- 右侧功能区域（新增容器）--><div id="nav-right-container"><!-- 搜索按钮（移动到右侧）--><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><!-- 移动端汉堡菜单按钮--><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></div></nav><div id="post-info"><h1 class="post-title">我的Emacs配置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-01-12T11:36:13.000Z" title="发表于 2025-01-12 19:36:13">2025-01-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-12-15T12:33:13.000Z" title="更新于 2025-12-15 20:33:13">2025-12-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/tools/">tools</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/28521/#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:30,&quot;messagePrev&quot;:&quot;该文章内容具有一定的时效性，距上次更新已经过了&quot;,&quot;messageNext&quot;:&quot;天，如有失效之处请留言~&quot;,&quot;postUpdate&quot;:&quot;2025-12-15 20:33:13&quot;}" hidden></div><hr>
<details class="folding-tag" green open><summary> 时间轴 </summary>
              <div class='content'>
              <div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>时间轴</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2025-01-12</p></div></div><div class='timeline-item-content'><p>init</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2025-10-17</p></div></div><div class='timeline-item-content'><p>add clang-format</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2025-12-03</p></div></div><div class='timeline-item-content'><p>modify indent style</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2025-12-15</p></div></div><div class='timeline-item-content'><p>add desktop-save-mode, add ibuffer, add magit</p></div></div></div>
              </div>
            </details>
<hr>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p>使用 Windows Terminal + WSL2</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/even629/myPicGo//202508021037505.png" alt="WSL2 Arch Linux" loading="lazy"></p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="Windows-Terminal"><a href="#Windows-Terminal" class="headerlink" title="Windows Terminal"></a>Windows Terminal</h2><p>Windows Terminal 中打开设置，选择打开 JSON 文件，在 schemes 中添加配色方案</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;schemes&quot;</span><span class="punctuation">:</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;background&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#0D1117&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;black&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#484F58&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;blue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#58A6FF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightBlack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#6E7681&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightBlue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#79C0FF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightCyan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#56D4DD&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightGreen&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#56D364&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightPurple&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#D2A8FF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightRed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFA198&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightWhite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;brightYellow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#E3B341&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cursorColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#2F81F7&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cyan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#39C5CF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;foreground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#E6EDF3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;green&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#3FB950&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GitHub-Dark-Default&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;purple&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#BC8CFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;red&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FF7B72&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;selectionBackground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#E6EDF3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;white&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#B1BAC4&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;yellow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#D29922&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>在 archlinux 的配置中选择 外观 选项卡<ul>
<li>配色方案选择 GitHub-Dark-Default</li>
<li>字体选择 FiraCode Nerd Font</li>
<li>背景不透明度 86%，选择启用亚克力材料</li>
</ul>
</li>
<li>在 archlinux 的配置中选择 高级 选项卡<ul>
<li>铃声通知样式取消勾选声音，选择闪烁窗口和闪烁任务栏</li>
</ul>
</li>
<li>安装 win32yank.exe 加入到环境变量中，使得在命令行可以直接访问到</li>
</ul>
<blockquote>
<p>如果亚克力失效，关闭Windows节能模式即可</p>
</blockquote>
<h2 id="Arch-Linux"><a href="#Arch-Linux" class="headerlink" title="Arch Linux"></a>Arch Linux</h2><p>archlinux 需要下载一些软件包</p>
<p>下载 yay 参考</p>
<div class="tag link"><a class="link-card" title="archlinux安装yay" target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/Yay"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wiki.archlinuxcn.org/wzh/images/logo.svg"/></div><div class="right"><p class="text">archlinux安装yay</p><p class="url">https://wiki.archlinuxcn.org/wiki/Yay</p></div></a></div>

<p>注意下载后最好对 pacman 和 yay 进行换源，否则速度巨慢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置locale</span></span><br><span class="line"><span class="built_in">sudo</span> nano /etc/locale.gen</span><br><span class="line"><span class="comment"># 找到#en_US.UTF-8 UTF-8解除注释</span></span><br><span class="line"><span class="built_in">sudo</span> locale-gen</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> pacman -Sy emacs-nox</span><br><span class="line"><span class="built_in">sudo</span> pacman -Sy clang nvm ripgrep bear pandoc</span><br><span class="line"></span><br><span class="line"><span class="comment"># python/bash development</span></span><br><span class="line"><span class="built_in">source</span> /usr/share/nvm/init-nvm.sh</span><br><span class="line">nvm list-remote</span><br><span class="line">nvm install v20.19.4</span><br><span class="line">nvm use v20.19.4</span><br><span class="line"></span><br><span class="line">npm i -g pyright bash-language-server devicetree-language-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># rust development</span></span><br><span class="line">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br><span class="line">rustup component add rust-analyzer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换系统ls命令为exa命令</span></span><br><span class="line"><span class="built_in">sudo</span> pacman -S exa</span><br><span class="line"><span class="comment"># 如果是zsh，则写入zshrc</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;alias ll=&quot;ls -alF&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;alias ls=&quot;exa --icons&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.emacs.d/data/backup</span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.emacs.d/data/autosave</span><br></pre></td></tr></table></figure>

<h2 id="Ubuntu20-04"><a href="#Ubuntu20-04" class="headerlink" title="Ubuntu20.04"></a>Ubuntu20.04</h2><p>参考：</p>
<div class="tag link"><a class="link-card" title="WSL ubuntu20.04安装与配置" href="https://even629.com/posts/42869"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://even629.com/img/favicon.ico"/></div><div class="right"><p class="text">WSL ubuntu20.04安装与配置</p><p class="url">https://even629.com/posts/42869</p></div></a></div>

<h2 id="Emacs"><a href="#Emacs" class="headerlink" title="Emacs"></a>Emacs</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>archlinux可直接通过pacman安装，如果是Ubuntu考虑自己编译，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Optional: 卸载snapd</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get purge snapd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载emacs源码</span></span><br><span class="line">wget https://mirrors.ustc.edu.cn/gnu/emacs/emacs-30.2.tar.xz</span><br><span class="line"><span class="built_in">cd</span> emacs</span><br><span class="line"><span class="built_in">sudo</span> apt install zlib1g-dev libgccjit-9-dev pkg-config libgnutls28-dev libtree-sitter-dev</span><br><span class="line">./configure --without-x --without-ns --without-pgtk --with-native-compilation --with-json --with-threads --prefix=/usr/local</span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>

<ul>
<li><code>--without-x</code>  emacs-nox，不使用 X11（Xorg），只能用 emacs -nw（终端）</li>
<li><code>--without-ns</code> 禁用 macOS 的 Cocoa &#x2F; NS 窗口系统，只是防止 configure 自动探测到 macOS GUI</li>
<li><code>--without-pgtk</code> 禁用 Pure GTK（Wayland 下的新 GUI 后端）</li>
<li><code>--with-native-compilation</code> 启用 native-comp（.eln）将Elisp 编译成机器码</li>
<li><code>--with-json</code>启用 原生 JSON 支持（libjansson）</li>
<li><code>--with-threads</code>启用 多线程支持</li>
<li><code>--prefix=/usr/local</code>安装到 &#x2F;usr&#x2F;local</li>
</ul>
<h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><details class="folding-tag" green><summary> .emacs </summary>
              <div class='content'>
              <figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;;不显示menu-bar</span></span><br><span class="line">(<span class="name">menu-bar-mode</span> <span class="number">-1</span>)</span><br><span class="line"><span class="comment">;;显示行号</span></span><br><span class="line">(<span class="name">global-display-line-numbers-mode</span> <span class="literal">t</span>)</span><br><span class="line"><span class="comment">;;在ModeLine显示列号</span></span><br><span class="line">(<span class="name">column-number-mode</span> <span class="number">1</span>)</span><br><span class="line"><span class="comment">;;代码的折叠</span></span><br><span class="line">(<span class="name">add-hook</span> &#x27;prog-mode-hook &#x27;hs-minor-mode)</span><br><span class="line"><span class="comment">;; 自动重载更改的文件</span></span><br><span class="line">(<span class="name">global-auto-revert-mode</span> <span class="number">1</span>)</span><br><span class="line"><span class="comment">;;开启可视化换行，自动折行</span></span><br><span class="line">(<span class="name">global-visual-line-mode</span> <span class="number">1</span>)</span><br><span class="line"><span class="comment">;; 括号匹配</span></span><br><span class="line">(<span class="name">electric-pair-mode</span> <span class="number">1</span>)</span><br><span class="line"><span class="comment">;; 自动缩进</span></span><br><span class="line">(<span class="name">electric-indent-mode</span> <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 鼠标模式</span></span><br><span class="line">(<span class="name">xterm-mouse-mode</span> <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 中文显示</span></span><br><span class="line">(<span class="name">set-language-environment</span> <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">(<span class="name">set-buffer-file-coding-system</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">set-terminal-coding-system</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">set-keyboard-coding-system</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">set-selection-coding-system</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">set-default-coding-systems</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">set-clipboard-coding-system</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">modify-coding-system-alist</span> &#x27;process <span class="string">&quot;*&quot;</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;utf-8)</span><br><span class="line">(<span class="name">setq-default</span> pathname-coding-system &#x27;utf-8)</span><br><span class="line">(<span class="name">setq</span> default-process-coding-system &#x27;(utf-8 . utf-8)</span><br><span class="line">      locale-coding-system &#x27;utf-8</span><br><span class="line">      file-name-coding-system &#x27;utf-8</span><br><span class="line">      default-buffer-file-coding-system &#x27;utf-8</span><br><span class="line">      slime-net-coding-system &#x27;utf-8-unix</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">(<span class="name">setq</span> find-file-encoding &#x27;auto)</span><br><span class="line">(<span class="name">setq-default</span> coding-system-for-read &#x27;utf-8)</span><br><span class="line">(<span class="name">setq-default</span> coding-system-for-write &#x27;utf-8)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; 基本设置</span></span><br><span class="line">(<span class="name">setq-default</span> window-combination-resize <span class="literal">t</span>                      <span class="comment">;; 新窗口平均其他左右窗口</span></span><br><span class="line">              x-stretch-cursor <span class="literal">t</span>                               <span class="comment">;; 将光标拉伸到字形宽度</span></span><br><span class="line">              indent-tabs-mode <span class="literal">nil</span></span><br><span class="line">              tab-width <span class="number">8</span></span><br><span class="line">              )</span><br><span class="line"></span><br><span class="line">(<span class="name">setq</span> ring-bell-function &#x27;ignore</span><br><span class="line">      initial-scratch-message <span class="literal">nil</span></span><br><span class="line">      inhibit-startup-message <span class="literal">t</span></span><br><span class="line">      auto-save-file-name-transforms &#x27;((<span class="string">&quot;.*&quot;</span> <span class="string">&quot;~/.emacs.d/data/autosave/&quot;</span> <span class="literal">t</span>)) <span class="comment">;; Write auto-save files to a separate directory</span></span><br><span class="line">      backup-directory-alist &#x27;((<span class="string">&quot;.&quot;</span> . <span class="string">&quot;~/.emacs.d/data/backup/&quot;</span>))          <span class="comment">;; Write backup files to a separate directory</span></span><br><span class="line">      create-lockfiles <span class="literal">nil</span>                                                 <span class="comment">;; Disable lockfiles</span></span><br><span class="line">      scroll-conservatively <span class="number">10000</span> <span class="comment">;;防止页面滚动时跳动</span></span><br><span class="line">      scroll-step <span class="number">1</span>               <span class="comment">;; 当光标移动到边缘时，窗口每次只滚动一行</span></span><br><span class="line">      undo-limit <span class="number">80000</span>         <span class="comment">;; 提升撤销限制</span></span><br><span class="line">      display-time-default-load-average <span class="literal">nil</span> <span class="comment">;; 不显示系统负载</span></span><br><span class="line">      use-short-answers <span class="literal">t</span></span><br><span class="line">      comp-deferred-compilation <span class="literal">t</span> <span class="comment">;; Emacs 28+</span></span><br><span class="line">      native-comp-async-report-warnings-errors <span class="literal">nil</span></span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="name">defun</span> my/kill-unwanted-buffers ()</span><br><span class="line">  <span class="string">&quot;在 Emacs 启动时关闭一些不想要的 buffer.&quot;</span></span><br><span class="line">  (<span class="name">dolist</span> (<span class="name">buf-name</span> &#x27;(<span class="string">&quot;*scratch*&quot;</span></span><br><span class="line">                      ;;<span class="string">&quot;*Async-native-compile-log*&quot;</span> ;; can&#x27;t be killed</span><br><span class="line">                      ;;<span class="string">&quot;*Messages*&quot;</span></span><br><span class="line">                      ))</span><br><span class="line">    (<span class="name">when</span> (<span class="name">get-buffer</span> buf-name)</span><br><span class="line">      (<span class="name">kill-buffer</span> buf-name))))</span><br><span class="line"></span><br><span class="line">(<span class="name">add-hook</span> &#x27;emacs-startup-hook #&#x27;my/kill-unwanted-buffers)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 启动速度统计</span></span><br><span class="line">(<span class="name">add-hook</span> &#x27;emacs-startup-hook</span><br><span class="line">          (<span class="name">lambda</span> ()</span><br><span class="line">            (<span class="name">message</span> <span class="string">&quot;Emacs ready in %s with %d garbage collections.&quot;</span></span><br><span class="line">                     (<span class="name">format</span> <span class="string">&quot;%.2f seconds&quot;</span></span><br><span class="line">                             (<span class="name">float-time</span></span><br><span class="line">                              (<span class="name">time-subtract</span> after-init-time before-init-time)))</span><br><span class="line">                     gcs-done)))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 如果用emacs打开文件则只打开文件，如果直接打开emacs则开启上次退出的非空界面</span></span><br><span class="line"><span class="comment">;; (add-hook &#x27;after-init-hook</span></span><br><span class="line"><span class="comment">;;           (defun if-desktop-read ()</span></span><br><span class="line"><span class="comment">;; 	    (setq desktop-dirname             &quot;~/.emacs.d/desktop/&quot;</span></span><br><span class="line"><span class="comment">;; 		  desktop-base-file-name      &quot;emacs.desktop&quot;</span></span><br><span class="line"><span class="comment">;; 		  desktop-base-lock-name      &quot;lock&quot;</span></span><br><span class="line"><span class="comment">;; 		  desktop-path                (list desktop-dirname)</span></span><br><span class="line"><span class="comment">;; 		  desktop-save                t</span></span><br><span class="line"><span class="comment">;; 		  desktop-files-not-to-save   &quot;^$&quot; ;reload tramp paths</span></span><br><span class="line"><span class="comment">;; 		  desktop-load-locked-desktop nil</span></span><br><span class="line"><span class="comment">;; 		  desktop-auto-save-timeout   10)</span></span><br><span class="line"><span class="comment">;; 	    (desktop-save-mode 1)</span></span><br><span class="line"><span class="comment">;; 	    (if (&lt; (length command-line-args) 2)</span></span><br><span class="line"><span class="comment">;; 		(desktop-read)))</span></span><br><span class="line"><span class="comment">;;           &#x27;if-desktop-read)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; 使用 Fira Code Nerd Font 字体</span></span><br><span class="line">(<span class="name">when</span> (<span class="name">display-graphic-p</span>)</span><br><span class="line">  (<span class="name">set-face-attribute</span> &#x27;default <span class="literal">nil</span></span><br><span class="line">                      <span class="symbol">:font</span> <span class="string">&quot;FiraCode Nerd Font&quot;</span></span><br><span class="line">                      <span class="symbol">:height</span> <span class="number">120</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; wsl与windos共享剪切版</span></span><br><span class="line">(<span class="name">defun</span> my/clipboard-to-windows (<span class="name">text</span> <span class="symbol">&amp;optional</span> push)</span><br><span class="line">  (<span class="name">let</span> ((<span class="name">process-connection-type</span> <span class="literal">nil</span>))</span><br><span class="line">    (<span class="name">with-temp-buffer</span></span><br><span class="line">      (<span class="name">insert</span> text)</span><br><span class="line">      (<span class="name">call-process-region</span> (<span class="name">point-min</span>) (<span class="name">point-max</span>) <span class="string">&quot;win32yank.exe&quot;</span> <span class="literal">nil</span> <span class="literal">nil</span> <span class="literal">nil</span> <span class="string">&quot;-i&quot;</span>))))</span><br><span class="line">(<span class="name">defun</span> my/clipboard-from-windows ()</span><br><span class="line">  (<span class="name">string-trim-right</span></span><br><span class="line">   (<span class="name">with-output-to-string</span></span><br><span class="line">     (<span class="name">call-process</span> <span class="string">&quot;win32yank.exe&quot;</span> <span class="literal">nil</span> standard-output <span class="literal">nil</span> <span class="string">&quot;-o&quot;</span>))))</span><br><span class="line"></span><br><span class="line">(<span class="name">setq</span> interprogram-cut-function &#x27;my/clipboard-to-windows)</span><br><span class="line">(<span class="name">setq</span> interprogram-paste-function &#x27;my/clipboard-from-windows)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;;设置镜像源</span></span><br><span class="line"><span class="comment">;; (setq package-archives</span></span><br><span class="line"><span class="comment">;;      &#x27;((&quot;melpa&quot; . &quot;https://melpa.org/packages/&quot;)</span></span><br><span class="line"><span class="comment">;;        (&quot;gnu&quot;   . &quot;https://elpa.gnu.org/packages/&quot;)))</span></span><br><span class="line">(<span class="name">setq</span> package-archives &#x27;((<span class="string">&quot;gnu&quot;</span>    . <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/&quot;</span>)</span><br><span class="line">                         (<span class="string">&quot;nongnu&quot;</span> . <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn/elpa/nongnu/&quot;</span>)</span><br><span class="line">                         (<span class="string">&quot;melpa&quot;</span>  . <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/&quot;</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> package</span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">unless</span> (<span class="name">bound-and-true-p</span> package--initialized)</span><br><span class="line">    (<span class="name">package-initialize</span>)))</span><br><span class="line"></span><br><span class="line">(<span class="name">setq</span> use-package-verbose <span class="literal">t</span></span><br><span class="line">      use-package-always-ensure <span class="literal">t</span></span><br><span class="line">      use-package-minimum-reported-time <span class="number">0.01</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;;通过github下载包</span></span><br><span class="line">(<span class="name">unless</span> (<span class="name">package-installed-p</span> &#x27;quelpa)</span><br><span class="line">  (<span class="name">with-temp-buffer</span></span><br><span class="line">    (<span class="name">url-insert-file-contents</span> <span class="string">&quot;https://raw.githubusercontent.com/quelpa/quelpa/master/quelpa.el&quot;</span>)</span><br><span class="line">    (<span class="name">eval-buffer</span>)</span><br><span class="line">    (<span class="name">quelpa-self-upgrade</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 关闭自动升级和 verbose（减少启动开销）</span></span><br><span class="line">(<span class="name">setq</span> quelpa-upgrade-p <span class="literal">nil</span></span><br><span class="line">      quelpa-verbose <span class="literal">nil</span></span><br><span class="line">      quelpa-checkout-melpa-p <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">(<span class="name">quelpa</span></span><br><span class="line"> &#x27;(quelpa-use-package</span><br><span class="line">   <span class="symbol">:fetcher</span> git</span><br><span class="line">   <span class="symbol">:url</span> <span class="string">&quot;https://github.com/quelpa/quelpa-use-package.git&quot;</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">require</span> &#x27;quelpa-use-package)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 防止 GC 触发太频繁</span></span><br><span class="line">(<span class="name">use-package</span> benchmark-init</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  <span class="comment">;; To disable collection of benchmark data after init is done.</span></span><br><span class="line">  (<span class="name">add-hook</span> &#x27;after-init-hook &#x27;benchmark-init/deactivate))</span><br><span class="line"></span><br><span class="line">(<span class="name">setq</span> gc-cons-threshold (<span class="name">*</span> <span class="number">128</span> <span class="number">1024</span> <span class="number">1024</span> ))</span><br><span class="line">(<span class="name">add-hook</span> &#x27;after-init-hook (<span class="name">lambda</span> () (<span class="name">setq</span> gc-cons-threshold (<span class="name">*</span> <span class="number">5</span> <span class="number">1024</span> <span class="number">1024</span>))))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 最近打开的文件</span></span><br><span class="line">(<span class="name">use-package</span> recentf</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="comment">;; Loads after 2 second of idle time.</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">;;doom主题</span></span><br><span class="line">(<span class="name">use-package</span> doom-themes</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:init</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">setq</span> doom-themes-enable-bold <span class="literal">t</span>    <span class="comment">; if nil, bold is universally disabled</span></span><br><span class="line">        doom-themes-enable-italic <span class="literal">nil</span>  <span class="comment">; if nil, italics is universally disable</span></span><br><span class="line">        )</span><br><span class="line">  <span class="comment">;; 加载主题（例如 doom-one）</span></span><br><span class="line">  (<span class="name">load-theme</span> &#x27;doom-tomorrow-night <span class="literal">t</span>)</span><br><span class="line">  (<span class="name">global-hl-line-mode</span> <span class="number">1</span>)</span><br><span class="line">  (<span class="name">doom-themes-visual-bell-config</span>) <span class="comment">;; 视觉提示“响铃”（visual bell）</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">;; dire 高亮</span></span><br><span class="line">(<span class="name">use-package</span> diredfl</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:hook</span> (<span class="name">dired-mode</span> . diredfl-mode))</span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> nerd-icons-dired</span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:quelpa</span> (<span class="name">nerd-icons-dired</span> <span class="symbol">:fetcher</span> github <span class="symbol">:repo</span> <span class="string">&quot;rainstormstudio/nerd-icons-dired&quot;</span>)</span><br><span class="line">  <span class="symbol">:after</span> nerd-icons</span><br><span class="line">  <span class="symbol">:hook</span> (<span class="name">dired-mode</span> . nerd-icons-dired-mode))</span><br><span class="line"></span><br><span class="line">(<span class="name">add-hook</span> &#x27;dired-mode-hook &#x27;nerd-icons-dired-mode)</span><br><span class="line"></span><br><span class="line"><span class="comment">;;tab栏显示buffer</span></span><br><span class="line"><span class="comment">;; (use-package centaur-tabs</span></span><br><span class="line"><span class="comment">;;   :ensure t</span></span><br><span class="line"><span class="comment">;;   :demand</span></span><br><span class="line"><span class="comment">;;   :init</span></span><br><span class="line"><span class="comment">;;   :config</span></span><br><span class="line"><span class="comment">;;   (defun centaur-tabs-hide-tab (x)</span></span><br><span class="line"><span class="comment">;;     &quot;隐藏特殊 buffer，保留 GUD/GDB buffer.&quot;</span></span><br><span class="line"><span class="comment">;;     (let ((name (format &quot;%s&quot; x)))</span></span><br><span class="line"><span class="comment">;;       (cond</span></span><br><span class="line"><span class="comment">;;        ;; 保留所有 GDB/GUD 相关 buffer</span></span><br><span class="line"><span class="comment">;;        ((string-match-p</span></span><br><span class="line"><span class="comment">;;          &quot;^\\*\\(gud\\|gdb\\)&quot; name)</span></span><br><span class="line"><span class="comment">;;         nil)</span></span><br><span class="line"><span class="comment">;;        ;; 隐藏 *Messages*、*Async-native-compile-log* 等内部 buffer</span></span><br><span class="line"><span class="comment">;;        ((string-prefix-p &quot;*&quot; name) t)</span></span><br><span class="line"><span class="comment">;;        ;; Magit buffer</span></span><br><span class="line"><span class="comment">;;        ((and (string-prefix-p &quot;magit&quot; name)</span></span><br><span class="line"><span class="comment">;;              (not (file-name-extension name))) t)</span></span><br><span class="line"><span class="comment">;;        ;;非文件不显示</span></span><br><span class="line"><span class="comment">;;        ((not (buffer-file-name x)) t)</span></span><br><span class="line"><span class="comment">;;        ;; 其他 buffer 显示</span></span><br><span class="line"><span class="comment">;;        (t nil))))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;   (defun centaur-tabs-buffer-groups ()</span></span><br><span class="line"><span class="comment">;;     &quot;`centaur-tabs-buffer-groups&#x27; control buffers&#x27; group rules.&quot;</span></span><br><span class="line"><span class="comment">;;     (list</span></span><br><span class="line"><span class="comment">;;      (cond</span></span><br><span class="line"><span class="comment">;;       ((or (string-equal &quot;*&quot; (substring (buffer-name) 0 1))</span></span><br><span class="line"><span class="comment">;;            (memq major-mode &#x27;(magit-process-mode</span></span><br><span class="line"><span class="comment">;;                               magit-status-mode</span></span><br><span class="line"><span class="comment">;;                               magit-diff-mode</span></span><br><span class="line"><span class="comment">;;                               magit-log-mode</span></span><br><span class="line"><span class="comment">;;                               magit-file-mode</span></span><br><span class="line"><span class="comment">;;                               magit-blob-mode</span></span><br><span class="line"><span class="comment">;;                               magit-blame-mode</span></span><br><span class="line"><span class="comment">;;                               ))) &quot;Emacs&quot;)</span></span><br><span class="line"><span class="comment">;;       ((memq major-mode &#x27;(helpful-mode</span></span><br><span class="line"><span class="comment">;;                           help-mode)) &quot;Help&quot;)</span></span><br><span class="line"><span class="comment">;;       (t</span></span><br><span class="line"><span class="comment">;;        (centaur-tabs-get-group-name (current-buffer))))))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;   (setq centaur-tabs-style &quot;bar&quot;</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-set-bar &#x27;over</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-enable-key-bindings nil</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-set-icons t</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-icon-type &#x27;nerd-icons</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-set-close-button nil</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-show-new-tab-button nil</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-set-modified-marker t</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-modified-marker &quot;M&quot;</span></span><br><span class="line"><span class="comment">;;         centaur-tabs-cycle-scope &#x27;tabs)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;   (centaur-tabs-mode t)</span></span><br><span class="line"><span class="comment">;;   :bind</span></span><br><span class="line"><span class="comment">;;   (&quot;C-&lt;left&gt;&quot; . centaur-tabs-backward)</span></span><br><span class="line"><span class="comment">;;   (&quot;C-&lt;right&gt;&quot; . centaur-tabs-forward)</span></span><br><span class="line"><span class="comment">;;   :hook</span></span><br><span class="line"><span class="comment">;;   (dired-mode . centaur-tabs-local-mode)</span></span><br><span class="line"><span class="comment">;;   )</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; modeline主题</span></span><br><span class="line">(<span class="name">use-package</span> doom-modeline</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:custom</span></span><br><span class="line">  (<span class="name">doom-modeline-buffer-file-name-style</span> &#x27;truncate-except-project) <span class="comment">; 更智能的文件名截断</span></span><br><span class="line">  (<span class="name">doom-modeline-env-version</span> <span class="literal">t</span>) <span class="comment">; 显示 Python/Rust 版本等</span></span><br><span class="line">  (<span class="name">doom-modeline-major-mode-icon</span> <span class="literal">t</span>)</span><br><span class="line">  <span class="symbol">:init</span> (<span class="name">doom-modeline-mode</span> <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;;文件导航栏</span></span><br><span class="line"><span class="comment">;; (use-package neotree</span></span><br><span class="line"><span class="comment">;;   :defer t</span></span><br><span class="line"><span class="comment">;;   :ensure t</span></span><br><span class="line"><span class="comment">;;   :bind ((&quot;&lt;f8&gt;&quot; . neotree-toggle))</span></span><br><span class="line"><span class="comment">;;   :config</span></span><br><span class="line"><span class="comment">;;   (setq neo-theme &#x27;nerd-icons)</span></span><br><span class="line"><span class="comment">;;   (setq neo-smart-open t)       ;;  打开时自动跳到当前文件路径</span></span><br><span class="line"><span class="comment">;;   (setq neo-show-hidden-files t);;  显示隐藏文件</span></span><br><span class="line"><span class="comment">;;   )</span></span><br><span class="line"><span class="comment">;; ;; neotree buffer 中强制截断长行</span></span><br><span class="line"><span class="comment">;; (add-hook &#x27;neo-after-create-hook</span></span><br><span class="line"><span class="comment">;;           (lambda (_)</span></span><br><span class="line"><span class="comment">;;             ;; 不换行，禁用 visual-line（你全局开了的话）</span></span><br><span class="line"><span class="comment">;;             (visual-line-mode -1)</span></span><br><span class="line"><span class="comment">;;             (setq-local truncate-lines t)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;             ;; 用 “…” 代替右侧的 $ 截断标记</span></span><br><span class="line"><span class="comment">;;             (let ((tbl (or buffer-display-table (make-display-table))))</span></span><br><span class="line"><span class="comment">;;               (set-display-table-slot tbl &#x27;truncation (make-glyph-code ?…))</span></span><br><span class="line"><span class="comment">;;               (setq-local buffer-display-table tbl))))</span></span><br><span class="line"><span class="comment">;; ;; 允许 neotree 窗口宽度可调整</span></span><br><span class="line"><span class="comment">;; (with-eval-after-load &#x27;neotree</span></span><br><span class="line"><span class="comment">;;   (setq neo-window-fixed-size nil))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> nerd-icons</span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:custom</span></span><br><span class="line">  (<span class="name">nerd-icons-font-family</span> <span class="string">&quot;FiraCode Nerd Font&quot;</span>)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> undo-tree</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:init</span> (<span class="name">global-undo-tree-mode</span>)</span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  <span class="comment">;;将undo-tree生成的文件,都写入到~/.emacs.d/.cache,方便管理.</span></span><br><span class="line">  (<span class="name">setq</span> undo-tree-history-directory-alist `((<span class="string">&quot;.&quot;</span> . <span class="string">&quot;~/.emacs.d/.cache&quot;</span>)))</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; enhancement for amx</span></span><br><span class="line"><span class="comment">;; 命令按历史排序</span></span><br><span class="line">(<span class="name">use-package</span> amx</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:init</span> (<span class="name">amx-mode</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> exec-path-from-shell</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:init</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">when</span> (<span class="name">memq</span> window-system &#x27;(mac ns x))</span><br><span class="line">    (<span class="name">exec-path-from-shell-initialize</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; Git工具</span></span><br><span class="line">(<span class="name">use-package</span> magit</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:bind</span> ((<span class="string">&quot;C-x g&quot;</span> . magit-status))</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> markdown-mode</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:mode</span> (<span class="string">&quot;\\.md\\&#x27;&quot;</span> . markdown-mode)</span><br><span class="line">  <span class="symbol">:init</span> (<span class="name">setq</span> markdown-command <span class="string">&quot;pandoc&quot;</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> dts-mode</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 语法解析</span></span><br><span class="line">(<span class="name">use-package</span> tree-sitter</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="comment">;; :when (and (fboundp &#x27;treesit-available-p)</span></span><br><span class="line">  <span class="comment">;;            (treesit-available-p))</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">setq</span> treesit-font-lock-level <span class="number">4</span>)</span><br><span class="line">  <span class="comment">;;:init</span></span><br><span class="line">  (<span class="name">setq</span> treesit-language-source-alist</span><br><span class="line">        &#x27;((bash       . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-bash&quot;</span> <span class="string">&quot;v0.20.0&quot;</span>))</span><br><span class="line">          (c          . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-c&quot;</span> <span class="string">&quot;v0.21.3&quot;</span>))</span><br><span class="line">          (cpp        . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-cpp&quot;</span>))</span><br><span class="line">          (python     . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-python&quot;</span>))</span><br><span class="line">          (rust       . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-rust&quot;</span>))</span><br><span class="line">          (toml       . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-toml&quot;</span>))</span><br><span class="line">          (elisp      . (<span class="string">&quot;https://github.com/Wilfred/tree-sitter-elisp&quot;</span>))</span><br><span class="line">          (cmake      . (<span class="string">&quot;https://github.com/uyha/tree-sitter-cmake&quot;</span>))</span><br><span class="line">          (dockerfile . (<span class="string">&quot;https://github.com/camdencheek/tree-sitter-dockerfile&quot;</span>))</span><br><span class="line">          (make       . (<span class="string">&quot;https://github.com/alemuller/tree-sitter-make&quot;</span>))</span><br><span class="line">          (yaml       . (<span class="string">&quot;https://github.com/ikatyang/tree-sitter-yaml&quot;</span>))</span><br><span class="line">          (json       . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-json&quot;</span>))</span><br><span class="line">          (java       . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-java&quot;</span>))</span><br><span class="line">	  (html       . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-html&quot;</span>))</span><br><span class="line">	  (javascript . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-javascript&quot;</span>))</span><br><span class="line">	  (css        . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-css&quot;</span>))</span><br><span class="line">	  (go         . (<span class="string">&quot;https://github.com/tree-sitter/tree-sitter-go&quot;</span>))</span><br><span class="line">          ))</span><br><span class="line"></span><br><span class="line">  <span class="comment">;;没有内置&lt;languate&gt;-mode的需要添加</span></span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\.c\\.[^/]*\\&#x27;&quot;</span> . c-ts-mode))</span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\.include\\.[^/]*\\&#x27;&quot;</span> . c-ts-mode))  </span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\.y[a]?ml\\&#x27;&quot;</span> . yaml-ts-mode))</span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\(?:Dockerfile\\(?:\\..*\\)?\\|\\.[Dd]ockerfile\\)\\&#x27;&quot;</span> . dockerfile-ts-mode))</span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\.rs\\&#x27;&quot;</span> . rust-ts-mode))</span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\.go\\&#x27;&quot;</span> . go-ts-mode))</span><br><span class="line">  (<span class="name">add-to-list</span> &#x27;auto-mode-alist &#x27;(<span class="string">&quot;\\.js\\&#x27;&quot;</span> . js-ts-mode))</span><br><span class="line">  </span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 安装 tree-sitter 语法解析器（仅 Emacs 29+）</span></span><br><span class="line"><span class="comment">;; (run-with-idle-timer 3 nil  ; 启动后3秒空闲时执行</span></span><br><span class="line"><span class="comment">;;                      (lambda ()</span></span><br><span class="line"><span class="comment">;;                        (dolist (lang &#x27;(bash c cpp python rust toml elisp cmake dockerfile make yaml json java html javascript css go))</span></span><br><span class="line"><span class="comment">;;                          (unless (treesit-language-available-p lang)</span></span><br><span class="line"><span class="comment">;;                            (treesit-install-language-grammar lang)))))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; 优先使用 Tree-sitter mode</span></span><br><span class="line">(<span class="name">setq</span> major-mode-remap-alist</span><br><span class="line">      &#x27;((bash-mode        . bash-ts-mode)</span><br><span class="line">        (c-mode           . c-ts-mode)</span><br><span class="line">        (c++-mode         . c++-ts-mode)</span><br><span class="line">        (python-mode      . python-ts-mode)</span><br><span class="line">        ;;(rust-mode        . rust-ts-mode)</span><br><span class="line">        (conf-toml-mode   . toml-ts-mode)</span><br><span class="line">        (elisp-mode       . elisp-ts-mode)</span><br><span class="line">        (cmake-mode       . cmake-ts-mode)</span><br><span class="line">        ;;(dockerfile-mode  . dockerfile-ts-mode)</span><br><span class="line">        (json-mode        . json-ts-mode)</span><br><span class="line">        (java-mode        . java-ts-mode)</span><br><span class="line">        ;;(yaml-mode        . yaml-ts-mode)</span><br><span class="line">        (makefile-mode    . makefile-ts-mode)</span><br><span class="line"></span><br><span class="line">        (mhtml-mode       . html-ts-mode)</span><br><span class="line">	(html-mode        . html-ts-mode)</span><br><span class="line">        ;;(js-mode          . js-ts-mode)</span><br><span class="line">        (css-mode         . css-ts-mode)</span><br><span class="line">        ;;(go-mode          . go-ts-mode)</span><br><span class="line">	))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 设置 C/C++ 模式的缩进为 8 个空格</span></span><br><span class="line">(<span class="name">defun</span> my-c-cpp-indent-setup ()</span><br><span class="line">  <span class="string">&quot;Customize C/C++ mode.&quot;</span></span><br><span class="line">  (<span class="name">setq</span> c-ts-mode-indent-offset <span class="number">8</span>)        <span class="comment">;; 缩进单位为 8</span></span><br><span class="line">  (<span class="name">setq</span> c-ts-mode-indent-style &#x27;linux))</span><br><span class="line"></span><br><span class="line">(<span class="name">dolist</span> (<span class="name">hook</span> &#x27;(c-mode-hook</span><br><span class="line">                c++-mode-hook</span><br><span class="line">                c-ts-mode-hook</span><br><span class="line">                c++-ts-mode-hook))</span><br><span class="line">  (<span class="name">add-hook</span> hook #&#x27;my-c-cpp-indent-setup))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; lsp语言服务器配置</span></span><br><span class="line">(<span class="name">use-package</span> eglot</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="number">1</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">setq</span> eglot-server-programs</span><br><span class="line">        &#x27;(((c-mode-hook c++-mode-hook c++-ts-mode c-ts-mode)</span><br><span class="line">                                                       . (<span class="string">&quot;clangd&quot;</span></span><br><span class="line">                                                          ;; <span class="string">&quot;-j=4&quot;</span></span><br><span class="line">                                                          <span class="string">&quot;--enable-config&quot;</span></span><br><span class="line">                                                          <span class="string">&quot;--background-index&quot;</span></span><br><span class="line">                                                          ;; <span class="string">&quot;--background-index-priority=low&quot;</span></span><br><span class="line">                                                          <span class="string">&quot;--clang-tidy&quot;</span></span><br><span class="line">                                                          <span class="string">&quot;--completion-style=detailed&quot;</span></span><br><span class="line">                                                          <span class="string">&quot;--header-insertion=never&quot;</span></span><br><span class="line">                                                          ;; <span class="string">&quot;--all-scopes-completion&quot;</span></span><br><span class="line">                                                          <span class="string">&quot;--pretty&quot;</span></span><br><span class="line">                                                          ;; <span class="string">&quot;--fallback-style=none&quot;</span></span><br><span class="line">                                                          ;;<span class="string">&quot;--query-driver=aarch64-linux-gnu-*&quot;</span></span><br><span class="line">                                                          ;;<span class="string">&quot;--query-driver=gcc,g++&quot;</span></span><br><span class="line">                                                          ))</span><br><span class="line">          ((dts-mode)                                  . (<span class="string">&quot;devicetree-language-server&quot;</span> <span class="string">&quot;--stdio&quot;</span>))</span><br><span class="line">          ((rust-mode rust-ts-mode)                    . (<span class="string">&quot;rust-analyzer&quot;</span> :initializationOptions</span><br><span class="line">                                                          (:cargo (:buildScripts (:enable <span class="literal">t</span>))</span><br><span class="line">                                                                  :procMacro (:enable <span class="literal">t</span>))))</span><br><span class="line"></span><br><span class="line">          ((python-mode python-ts-mode)                . (<span class="string">&quot;pyright-langserver&quot;</span> <span class="string">&quot;--stdio&quot;</span>))</span><br><span class="line"></span><br><span class="line">          ;;((bash-mode bash-ts-mode sh-mode sh-ts-mode) . (<span class="string">&quot;bash-language-server&quot;</span> <span class="string">&quot;start&quot;</span>))</span><br><span class="line">          ;; ((toml-mode toml-ts-mode)                    . (<span class="string">&quot;taplo&quot;</span> <span class="string">&quot;lsp&quot;</span> <span class="string">&quot;stdio&quot;</span>))</span><br><span class="line">          ;; ((yaml-mode yaml-ts-mode)                    . (<span class="string">&quot;yaml-language-server&quot;</span> <span class="string">&quot;--stdio&quot;</span>))</span><br><span class="line">          ;; ((markdown-mode markdown-ts-mode)            . (<span class="string">&quot;marksman&quot;</span>))</span><br><span class="line"></span><br><span class="line">          ))</span><br><span class="line"></span><br><span class="line">  <span class="comment">;; 关闭lsp自动格式化</span></span><br><span class="line">  (<span class="name">setq</span> eglot-ignored-server-capabilities &#x27;(<span class="symbol">:documentOnTypeFormattingProvider</span>))</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">;;自动打开eglot</span></span><br><span class="line">(<span class="name">dolist</span> (<span class="name">hook</span> &#x27;(c-mode-hook c-ts-mode-hook c++-mode-hook c++-ts-mode-hook</span><br><span class="line">                            dts-mode-hook</span><br><span class="line">                            rust-mode-hook rust-ts-mode-hook</span><br><span class="line">                            python-mode-hook python-ts-mode-hook</span><br><span class="line">                            ;;bash-mode-hook bash-ts-mode-hook</span><br><span class="line">                            ;;sh-mode-hook sh-ts-mode-hook</span><br><span class="line">                            ;; markdown-mode-hook markdown-ts-mode-hook</span><br><span class="line">                            ;; toml-mode-hook toml-ts-mode-hook</span><br><span class="line">                            ;; yaml-mode-hook yaml-ts-mode-hook</span><br><span class="line">			    ))</span><br><span class="line">  (<span class="name">add-hook</span> hook &#x27;eglot-ensure))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; eglot快捷键</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-,&quot;</span>) &#x27;xref-find-definitions)  <span class="comment">;; 跳转到定义</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-.&quot;</span>) &#x27;xref-pop-marker-stack)  <span class="comment">;; 跳回</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-?&quot;</span>) &#x27;xref-find-references)   <span class="comment">;; 查找引用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; comment</span></span><br><span class="line">(<span class="name">defun</span> my-cpp-line-comments ()</span><br><span class="line">  <span class="string">&quot;Use // comments instead of /* */ in C/C++.&quot;</span></span><br><span class="line">  (<span class="name">setq-local</span> comment-start <span class="string">&quot;// &quot;</span></span><br><span class="line">              comment-end <span class="string">&quot;&quot;</span></span><br><span class="line">              comment-start-skip <span class="string">&quot;//+\\s-*&quot;</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">dolist</span> (<span class="name">hook</span> &#x27;(c-mode-hook c++-mode-hook c-ts-mode-hook c++-ts-mode-hook</span><br><span class="line">                            rust-mode-hook rust-ts-mode-hook python-mode-hook python-ts-mode-hook java-mode-hook java-ts-mode-hook))</span><br><span class="line">  (<span class="name">add-hook</span> hook #&#x27;my-cpp-line-comments))</span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> yasnippet</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:hook</span> (<span class="name">after-init</span> . yas-global-mode)</span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  <span class="comment">;; 可选：设置 snippet 目录（默认已包含 ～/.emacs.d/snippets）</span></span><br><span class="line">  <span class="comment">;; (setq yas-snippet-dirs &#x27;(&quot;～/.emacs.d/snippets&quot;)))</span></span><br><span class="line">  )</span><br><span class="line"><span class="comment">;; 自动补全</span></span><br><span class="line">(<span class="name">use-package</span> company</span><br><span class="line">  <span class="symbol">:defer</span> <span class="number">1</span></span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:hook</span> (<span class="name">after-init</span> . global-company-mode)</span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  <span class="comment">;; 光标停留 0 秒立即弹出补全</span></span><br><span class="line">  (<span class="name">setq</span> company-idle-delay <span class="number">0</span>)</span><br><span class="line">  <span class="comment">;; 后端</span></span><br><span class="line">  (<span class="name">setq</span> company-backends &#x27;((company-capf :with company-yasnippet)</span><br><span class="line">                           company-keywords</span><br><span class="line">                           company-files))</span><br><span class="line">  <span class="comment">;; 最少 1 个字符触发补全，0 表示空白处也可以触发</span></span><br><span class="line">  (<span class="name">setq</span> company-minimum-prefix-length <span class="number">1</span>)</span><br><span class="line">  <span class="comment">;; 补全候选最多显示 30 个</span></span><br><span class="line">  (<span class="name">setq</span> company-tooltip-limit <span class="number">30</span>)</span><br><span class="line">  (<span class="name">setq</span> eldoc-idle-delay <span class="number">0.3</span>)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; GDB配置</span></span><br><span class="line">(<span class="name">add-hook</span> &#x27;gud-mode-hook (<span class="name">lambda</span> () (<span class="name">company-mode</span> <span class="number">-1</span>))) <span class="comment">;; gud模式下禁用 company</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; 格式化</span></span><br><span class="line">(<span class="name">use-package</span> format-all</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:commands</span> format-all-mode</span><br><span class="line">  <span class="comment">;; :hook (prog-mode . format-all-mode) ;; 禁用自动保存格式化</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">setq-default</span> format-all-formatters</span><br><span class="line">                &#x27;((<span class="string">&quot;C&quot;</span> (clang-format))</span><br><span class="line">                  (<span class="string">&quot;C++&quot;</span>     (clang-format))</span><br><span class="line">                  ;; (<span class="string">&quot;Java&quot;</span> (clang-format))</span><br><span class="line">                  (<span class="string">&quot;Rust&quot;</span> (rustfmt))</span><br><span class="line">                  (<span class="string">&quot;JavaScript&quot;</span> (prettier))</span><br><span class="line">                  (<span class="string">&quot;Markdown&quot;</span> (prettier))</span><br><span class="line">                  (<span class="string">&quot;YAML&quot;</span> (prettier))</span><br><span class="line">                  (<span class="string">&quot;TOML&quot;</span> (taplo-fmt))</span><br><span class="line">                  (<span class="string">&quot;Devicetree&quot;</span> (dtsfmt))</span><br><span class="line">                  )))</span><br><span class="line"></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-x f&quot;</span>) &#x27;format-all-buffer)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; which-key 显示键绑定提示</span></span><br><span class="line">(<span class="name">use-package</span> which-key</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">which-key-mode</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 窗格切换</span></span><br><span class="line">(<span class="name">use-package</span> ace-window</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:bind</span> ((<span class="string">&quot;M-o&quot;</span> . ace-window)))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 窗格移动</span></span><br><span class="line">(<span class="name">use-package</span> buffer-move</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:bind</span> ((<span class="string">&quot;C-c &lt;up&gt;&quot;</span>    . buf-move-up)</span><br><span class="line">         (<span class="string">&quot;C-c &lt;down&gt;&quot;</span>  . buf-move-down)</span><br><span class="line">         (<span class="string">&quot;C-c &lt;left&gt;&quot;</span>  . buf-move-left)</span><br><span class="line">         (<span class="string">&quot;C-c &lt;right&gt;&quot;</span> . buf-move-right)))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 智能按键C-a C-c k</span></span><br><span class="line">(<span class="name">use-package</span> crux</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:bind</span> ((<span class="string">&quot;C-a&quot;</span> . &#x27;crux-move-beginning-of-line)</span><br><span class="line">         (<span class="string">&quot;C-c k&quot;</span> . &#x27;crux-smart-kill-line)))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 预览要跳转的行</span></span><br><span class="line">(<span class="name">use-package</span> goto-line-preview</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:bind</span> ((<span class="string">&quot;M-g g&quot;</span> . goto-line-preview)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;;代码整行上移下移</span></span><br><span class="line">(<span class="name">use-package</span> move-dup</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:bind</span> ((<span class="string">&quot;C-M-p&quot;</span>   . move-dup-move-lines-up)</span><br><span class="line">         <span class="comment">;;    (&quot;C-M-p&quot; . move-dup-duplicate-up)</span></span><br><span class="line">         (<span class="string">&quot;C-M-n&quot;</span>   . move-dup-move-lines-down)</span><br><span class="line">         <span class="comment">;;    (&quot;C-M-n&quot; . move-dup-duplicate-down)</span></span><br><span class="line">         ))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 项目识别,通过创建.projectile文件识别为一个项目</span></span><br><span class="line">(<span class="name">setq</span> project-find-functions <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> projectile</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="comment">;;:init</span></span><br><span class="line">  <span class="comment">;; :bind-keymap</span></span><br><span class="line">  <span class="comment">;; (&quot;C-c p&quot; . projectile-command-map)</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">projectile-mode</span> <span class="number">+1</span>)</span><br><span class="line">  (<span class="name">setq</span> projectile-enable-caching <span class="literal">t</span>)</span><br><span class="line">  (<span class="name">setq</span> projectile-project-search-path &#x27;(<span class="string">&quot;~/repository&quot;</span>))</span><br><span class="line">  (<span class="name">setq</span> projectile-completion-system &#x27;auto) <span class="comment">;; 或 ivy / helm / default</span></span><br><span class="line"></span><br><span class="line">  (<span class="name">use-package</span> rg</span><br><span class="line">    <span class="symbol">:defer</span> <span class="literal">t</span></span><br><span class="line">    <span class="symbol">:ensure</span> <span class="literal">t</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">use-package</span> multiple-cursors</span><br><span class="line">  <span class="symbol">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="symbol">:config</span></span><br><span class="line">  (<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-c m&quot;</span>) &#x27;mc/mark-all-dwim))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 快捷键定义必须放在后面否则容易被其他插件覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; next error</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-n&quot;</span>) #&#x27;flymake-goto-next-error)</span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-p&quot;</span>) #&#x27;flymake-goto-prev-error)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; 快捷键绑定：使用调整窗口大小</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-&lt;up&gt;&quot;</span>)    &#x27;enlarge-window)</span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-&lt;down&gt;&quot;</span>)  &#x27;shrink-window)</span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-&lt;left&gt;&quot;</span>)  &#x27;shrink-window-horizontally)</span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;M-&lt;right&gt;&quot;</span>) &#x27;enlarge-window-horizontally)</span><br><span class="line"></span><br><span class="line"><span class="comment">;;撤销</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-/&quot;</span>) &#x27;undo-only)</span><br><span class="line"></span><br><span class="line"><span class="comment">;;全局搜索</span></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-c C-s&quot;</span>) &#x27;projectile-ripgrep)</span><br><span class="line"></span><br><span class="line">(<span class="name">defun</span> k-insert-timestamp ()</span><br><span class="line">  (<span class="name">interactive</span>)</span><br><span class="line">  (<span class="name">insert</span> (<span class="name">format-time-string</span> <span class="string">&quot;%Y-%m-%d %H:%M&quot;</span>)))</span><br><span class="line"></span><br><span class="line">(<span class="name">defun</span> k-insert-date ()</span><br><span class="line">  (<span class="name">interactive</span>)</span><br><span class="line">  (<span class="name">insert</span> (<span class="name">format-time-string</span> <span class="string">&quot;%Y-%m-%d&quot;</span>)))</span><br><span class="line"></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-c t&quot;</span>) &#x27;k-insert-timestamp)</span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-c d&quot;</span>) &#x27;k-insert-date)</span><br><span class="line"></span><br><span class="line">(<span class="name">global-unset-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-x C-b&quot;</span>))</span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-x C-b&quot;</span>) &#x27;ibuffer)</span><br><span class="line"></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;TAB&quot;</span>) &#x27;tab-to-tab-stop)</span><br><span class="line"></span><br><span class="line">(<span class="name">global-set-key</span> (<span class="name">kbd</span> <span class="string">&quot;C-x k&quot;</span>)</span><br><span class="line">                (<span class="name">lambda</span> ()</span><br><span class="line">                  (<span class="name">interactive</span>)</span><br><span class="line">                  (<span class="name">kill-this-buffer</span>)))</span><br><span class="line"></span><br><span class="line">(<span class="name">custom-set-variables</span></span><br><span class="line"> <span class="comment">;; custom-set-variables was added by Custom.</span></span><br><span class="line"> <span class="comment">;; If you edit it by hand, you could mess it up, so be careful.</span></span><br><span class="line"> <span class="comment">;; Your init file should contain only one such instance.</span></span><br><span class="line"> <span class="comment">;; If there is more than one, they won&#x27;t work right.</span></span><br><span class="line"> &#x27;(package-selected-packages nil))</span><br><span class="line">(<span class="name">custom-set-faces</span></span><br><span class="line"> <span class="comment">;; custom-set-faces was added by Custom.</span></span><br><span class="line"> <span class="comment">;; If you edit it by hand, you could mess it up, so be careful.</span></span><br><span class="line"> <span class="comment">;; Your init file should contain only one such instance.</span></span><br><span class="line"> <span class="comment">;; If there is more than one, they won&#x27;t work right.</span></span><br><span class="line"> )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
              </div>
            </details>


<h2 id="clang-format-配置"><a href="#clang-format-配置" class="headerlink" title=".clang-format 配置"></a>.clang-format 配置</h2><p>直接用的 Linux Kernel 的配置，但没有使用TAB，而是空格，ColumnLimit调大为100</p>
<details class="folding-tag" green><summary> .clang-format </summary>
              <div class='content'>
              <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SPDX-License-Identifier: GPL-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># clang-format configuration file. Intended for clang-format &gt;= 11.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, see:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   Documentation/dev-tools/clang-format.rst</span></span><br><span class="line"><span class="comment">#   https://clang.llvm.org/docs/ClangFormat.html</span></span><br><span class="line"><span class="comment">#   https://clang.llvm.org/docs/ClangFormatStyleOptions.html</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">AccessModifierOffset:</span> <span class="number">-4</span></span><br><span class="line"><span class="attr">AlignAfterOpenBracket:</span> <span class="string">Align</span></span><br><span class="line"><span class="attr">AlignConsecutiveAssignments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AlignConsecutiveDeclarations:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AlignEscapedNewlines:</span> <span class="string">Left</span></span><br><span class="line"><span class="attr">AlignOperands:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">AlignTrailingComments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AllowAllParametersOfDeclarationOnNextLine:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AllowShortBlocksOnASingleLine:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AllowShortCaseLabelsOnASingleLine:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AllowShortFunctionsOnASingleLine:</span> <span class="string">None</span></span><br><span class="line"><span class="attr">AllowShortIfStatementsOnASingleLine:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AllowShortLoopsOnASingleLine:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AlwaysBreakAfterDefinitionReturnType:</span> <span class="string">None</span></span><br><span class="line"><span class="attr">AlwaysBreakAfterReturnType:</span> <span class="string">None</span></span><br><span class="line"><span class="attr">AlwaysBreakBeforeMultilineStrings:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">AlwaysBreakTemplateDeclarations:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">BinPackArguments:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">BinPackParameters:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">BraceWrapping:</span></span><br><span class="line">  <span class="attr">AfterClass:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">AfterControlStatement:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">AfterEnum:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">AfterFunction:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">AfterNamespace:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">AfterObjCDeclaration:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">AfterStruct:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">AfterUnion:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">AfterExternBlock:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">BeforeCatch:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">BeforeElse:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">IndentBraces:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">SplitEmptyFunction:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">SplitEmptyRecord:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">SplitEmptyNamespace:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">BreakBeforeBinaryOperators:</span> <span class="string">None</span></span><br><span class="line"><span class="attr">BreakBeforeBraces:</span> <span class="string">Custom</span></span><br><span class="line"><span class="attr">BreakBeforeInheritanceComma:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">BreakBeforeTernaryOperators:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">BreakConstructorInitializersBeforeComma:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">BreakConstructorInitializers:</span> <span class="string">BeforeComma</span></span><br><span class="line"><span class="attr">BreakAfterJavaFieldAnnotations:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">BreakStringLiterals:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">ColumnLimit:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">CommentPragmas:</span> <span class="string">&quot;^ IWYU pragma:&quot;</span></span><br><span class="line"><span class="attr">CompactNamespaces:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">ConstructorInitializerAllOnOneLineOrOnePerLine:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">ConstructorInitializerIndentWidth:</span> <span class="number">8</span></span><br><span class="line"><span class="attr">ContinuationIndentWidth:</span> <span class="number">8</span></span><br><span class="line"><span class="attr">Cpp11BracedListStyle:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">DerivePointerAlignment:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">DisableFormat:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">ExperimentalAutoDetectBinPacking:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">FixNamespaceComments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">IncludeBlocks:</span> <span class="string">Preserve</span></span><br><span class="line"><span class="attr">IncludeCategories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">Regex:</span> <span class="string">&quot;.*&quot;</span></span><br><span class="line">    <span class="attr">Priority:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">IncludeIsMainRegex:</span> <span class="string">&quot;(Test)?$&quot;</span></span><br><span class="line"><span class="attr">IndentCaseLabels:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">IndentGotoLabels:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">IndentPPDirectives:</span> <span class="string">None</span></span><br><span class="line"><span class="attr">IndentWidth:</span> <span class="number">8</span></span><br><span class="line"><span class="attr">IndentWrappedFunctionNames:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">JavaScriptQuotes:</span> <span class="string">Leave</span></span><br><span class="line"><span class="attr">JavaScriptWrapImports:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">KeepEmptyLinesAtTheStartOfBlocks:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">MacroBlockBegin:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">MacroBlockEnd:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">MaxEmptyLinesToKeep:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">NamespaceIndentation:</span> <span class="string">None</span></span><br><span class="line"><span class="attr">ObjCBinPackProtocolList:</span> <span class="string">Auto</span></span><br><span class="line"><span class="attr">ObjCBlockIndentWidth:</span> <span class="number">8</span></span><br><span class="line"><span class="attr">ObjCSpaceAfterProperty:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">ObjCSpaceBeforeProtocolList:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Taken from git&#x27;s rules</span></span><br><span class="line"><span class="attr">PenaltyBreakAssignment:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">PenaltyBreakBeforeFirstCallParameter:</span> <span class="number">30</span></span><br><span class="line"><span class="attr">PenaltyBreakComment:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">PenaltyBreakFirstLessLess:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">PenaltyBreakString:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">PenaltyExcessCharacter:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">PenaltyReturnTypeOnItsOwnLine:</span> <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="attr">PointerAlignment:</span> <span class="string">Right</span></span><br><span class="line"><span class="attr">ReflowComments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SortIncludes:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SortUsingDeclarations:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpaceAfterCStyleCast:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpaceAfterTemplateKeyword:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">SpaceBeforeAssignmentOperators:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">SpaceBeforeCtorInitializerColon:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">SpaceBeforeInheritanceColon:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">SpaceBeforeParens:</span> <span class="string">ControlStatementsExceptForEachMacros</span></span><br><span class="line"><span class="attr">SpaceBeforeRangeBasedForLoopColon:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">SpaceInEmptyParentheses:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpacesBeforeTrailingComments:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">SpacesInAngles:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpacesInContainerLiterals:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpacesInCStyleCastParentheses:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpacesInParentheses:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">SpacesInSquareBrackets:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">Standard:</span> <span class="string">Cpp03</span></span><br><span class="line"><span class="attr">TabWidth:</span> <span class="number">8</span></span><br><span class="line"><span class="attr">UseTab:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
              </div>
            </details>




<h1 id="快捷键配置总览"><a href="#快捷键配置总览" class="headerlink" title="快捷键配置总览"></a>快捷键配置总览</h1><blockquote>
<p>“C”  在 Emacs 中表示<kbd>Ctrl</kbd></p>
<p>“M” 在 Emacs 中表示<kbd>Alt</kbd></p>
</blockquote>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>功能描述</th>
<th>来源配置</th>
</tr>
</thead>
<tbody><tr>
<td><strong>C-&#x2F;</strong></td>
<td>撤销（undo-only）</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>C-?</strong></td>
<td>重做（undo-redo）</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-&lt;up&gt;</strong></td>
<td>增大当前窗口高度</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-&lt;down&gt;</strong></td>
<td>减小当前窗口高度</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-&lt;left&gt;</strong></td>
<td>减小当前窗口宽度</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-&lt;right&gt;</strong></td>
<td>增大当前窗口宽度</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>C-&lt;left&gt;</strong></td>
<td>切换到前一个 Tab（Centaur Tabs）</td>
<td><code>centaur-tabs</code></td>
</tr>
<tr>
<td><strong>C-&lt;right&gt;</strong></td>
<td>切换到下一个 Tab</td>
<td><code>centaur-tabs</code></td>
</tr>
<tr>
<td><strong>M-g g</strong></td>
<td>预览跳转到指定行（goto-line-preview）</td>
<td><code>goto-line-preview</code></td>
</tr>
<tr>
<td><strong>M-C-p</strong></td>
<td>将当前行上移</td>
<td><code>move-dup</code></td>
</tr>
<tr>
<td><strong>M-C-n</strong></td>
<td>将当前行下移</td>
<td><code>move-dup</code></td>
</tr>
<tr>
<td><strong>M-p</strong></td>
<td>下一个错误</td>
<td><code>flymake</code></td>
</tr>
<tr>
<td><strong>M-n</strong></td>
<td>上一个错误</td>
<td><code>flymake</code></td>
</tr>
<tr>
<td><strong>f8</strong></td>
<td>打开&#x2F;关闭文件树侧边栏（neotree）</td>
<td><code>neotree</code></td>
</tr>
<tr>
<td><strong>C-x g</strong></td>
<td>magit status</td>
<td><code>magit</code></td>
</tr>
<tr>
<td><strong>C-x f</strong></td>
<td>格式化当前 buffer（clang-format &#x2F; rustfmt）</td>
<td><code>format-all</code></td>
</tr>
<tr>
<td><strong>M-,</strong></td>
<td>跳转到定义（xref-find-definitions，需 LSP 支持）</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-.</strong></td>
<td>跳回上一个位置（xref-pop-marker-stack）</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-?</strong></td>
<td>查找引用（xref-find-references，需 LSP 支持）</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>M-o</strong></td>
<td>在多个窗口间切换焦点</td>
<td><code>ace-window</code></td>
</tr>
<tr>
<td><strong>C-c &lt;up&gt;</strong></td>
<td>当前 buffer 上移到另一个窗口</td>
<td><code>buffer-move</code></td>
</tr>
<tr>
<td><strong>C-c &lt;down&gt;</strong></td>
<td>当前 buffer 下移到另一个窗口</td>
<td><code>buffer-move</code></td>
</tr>
<tr>
<td><strong>C-c &lt;left&gt;</strong></td>
<td>当前 buffer 左移到另一个窗口</td>
<td><code>buffer-move</code></td>
</tr>
<tr>
<td><strong>C-c &lt;right&gt;</strong></td>
<td>当前 buffer 右移到另一个窗口</td>
<td><code>buffer-move</code></td>
</tr>
<tr>
<td><strong>C-a</strong></td>
<td>智能移动光标到行首（再次按可回到代码开始处）</td>
<td><code>crux</code></td>
</tr>
<tr>
<td><strong>C-c k</strong></td>
<td>智能删除一行（不会破坏缩进）</td>
<td><code>crux</code></td>
</tr>
<tr>
<td><strong>C-c p</strong></td>
<td>Projectile 项目命令前缀</td>
<td><code>projectile</code></td>
</tr>
<tr>
<td><strong>C-x SPC</strong></td>
<td>矩形选择模式，可以选择某些列</td>
<td>内置</td>
</tr>
<tr>
<td><strong>M-&lt;</strong></td>
<td>移到缓冲区开头</td>
<td>内置</td>
</tr>
<tr>
<td><strong>M-&gt;</strong></td>
<td>移到缓冲区末尾</td>
<td>内置</td>
</tr>
<tr>
<td><strong>C-c t</strong></td>
<td>插入时间戳</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>C-c d</strong></td>
<td>插入日期</td>
<td>手动绑定</td>
</tr>
<tr>
<td><strong>C-x u</strong></td>
<td>打开undo-tree</td>
<td>undo-tree</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>M-X projectile-ripgrep</strong> ripgrep全局查找</p>
</li>
<li><p><strong>C-c C-s</strong> 项目里全局查找</p>
</li>
<li><p><strong>neotree</strong></p>
<ul>
<li><strong>M-x neotree-create-node</strong> 创建文件，也可以用<strong>C-c n</strong></li>
<li><strong>M-x neotree-delete-node</strong> 删除文件</li>
<li><strong>M-x neotree-rename-node</strong> 重命名文件</li>
</ul>
</li>
<li><p><strong>M-x recenter</strong> 把当前行放在窗口中间</p>
</li>
<li><p><strong>M-x eglot-code-actions</strong>对于 lsp 提示 fix available 的可以让 lsp 修改</p>
</li>
<li><p><strong>M-x man</strong>, 然后输入要查找的函数比如<code>shmget(2)</code>，这里2表示查找syscall，然后在 <code>*Man*</code> 缓冲区中用：</p>
<ul>
<li><strong>M-n</strong> → 下一个手册页</li>
<li><strong>M-p</strong> → 上一个手册页</li>
</ul>
</li>
</ul>
<h2 id="buffer-menu"><a href="#buffer-menu" class="headerlink" title="buffer-menu"></a>buffer-menu</h2><p>你可以用以下按键操作：</p>
<table>
<thead>
<tr>
<th>按键</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>Enter</code> 或 <code>f</code></td>
<td>切换到光标所在行的缓冲区</td>
</tr>
<tr>
<td><code>o</code></td>
<td>切换到该缓冲区，并保留 <code>*Buffer List*</code></td>
</tr>
<tr>
<td><code>d</code></td>
<td>标记该缓冲区为“待删除”（不会立即删）</td>
</tr>
<tr>
<td><code>x</code></td>
<td><strong>真正删除</strong>所有被标记的缓冲区</td>
</tr>
<tr>
<td><code>s</code></td>
<td>保存该缓冲区（如果已修改）</td>
</tr>
<tr>
<td><code>u</code></td>
<td>取消标记（如果之前按了 <code>d</code>）</td>
</tr>
<tr>
<td><code>q</code></td>
<td>关闭 <code>*Buffer List*</code> 窗口</td>
</tr>
<tr>
<td><code>g</code></td>
<td>刷新列表（重新加载最新状态）</td>
</tr>
</tbody></table>
<p>按d标记删除后，按x才是真正删除</p>
<h2 id="magit"><a href="#magit" class="headerlink" title="magit"></a>magit</h2><p>Magit 的设计哲学是：<strong>一个按键 &#x3D; 一个操作</strong>。</p>
<table>
<thead>
<tr>
<th>按键</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>s</code></td>
<td><strong>Stage</strong> 当前光标下的文件&#x2F;区域（相当于 <code>git add</code>）</td>
</tr>
<tr>
<td><code>u</code></td>
<td><strong>Unstage</strong>（取消暂存）</td>
</tr>
<tr>
<td><code>c</code></td>
<td><strong>Commit</strong>（提交） → 再按 <code>c</code> 确认</td>
</tr>
<tr>
<td><code>P</code></td>
<td><strong>Push</strong> 推送到远程</td>
</tr>
<tr>
<td><code>F</code></td>
<td><strong>Fetch</strong> 从远程拉取更新</td>
</tr>
<tr>
<td><code>p</code></td>
<td><strong>Pull</strong>（拉取并合并）</td>
</tr>
<tr>
<td><code>b</code></td>
<td>分支操作（创建&#x2F;切换&#x2F;合并）</td>
</tr>
<tr>
<td><code>l</code></td>
<td>查看 <strong>log</strong>（提交历史）</td>
</tr>
<tr>
<td><code>L</code></td>
<td>查看带图形的 log（类似 <code>git log --graph</code>）</td>
</tr>
<tr>
<td><code>d</code></td>
<td><strong>Diff</strong> 查看变更内容</td>
</tr>
<tr>
<td><code>=</code></td>
<td>在 commit 上按 <code>=</code> 查看该次提交的 diff</td>
</tr>
<tr>
<td><code>q</code></td>
<td><strong>Quit</strong> 关闭当前 Magit 缓冲区</td>
</tr>
</tbody></table>
<blockquote>
<p>⚠️ 注意：这些命令<strong>只在 Magit 状态缓冲区（<code>*magit: xxx*</code>）中有效</strong>！</p>
</blockquote>
<p>使用一个按键后，按ctlr-g取消</p>
<h1 id="编程设置"><a href="#编程设置" class="headerlink" title="编程设置"></a>编程设置</h1><p>对于有 makefile 的 project 可以用 bear 生成 compile_command.json 供 clangd 索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在项目根目录下创建，标识这是一个项目</span></span><br><span class="line"><span class="built_in">touch</span> .projectile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成compile_command.json</span></span><br><span class="line">make clean</span><br><span class="line">bear -- make</span><br></pre></td></tr></table></figure>

<p>对于linux内核相关设置，参考</p>
<div class="tag link"><a class="link-card" title="最小Linux系统编译运行" href="https://even629.com/posts/42869"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://even629.com/img/favicon.ico"/></div><div class="right"><p class="text">最小Linux系统编译运行</p><p class="url">https://even629.com/posts/42869</p></div></a></div>



<h1 id="以守护进程形式运行Emacs"><a href="#以守护进程形式运行Emacs" class="headerlink" title="以守护进程形式运行Emacs"></a>以守护进程形式运行Emacs</h1><h2 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h2><p>需要systemd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl --user <span class="built_in">enable</span> --now emacs</span><br><span class="line">emacsclient file.txt</span><br></pre></td></tr></table></figure>

<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emacs --daemon</span><br><span class="line">emacsclient file.txt</span><br></pre></td></tr></table></figure>

<div class="tip warning"><p>完成编辑后，按 <kbd>Ctrl</kbd>+<kbd>x</kbd>，然后 <kbd>#</kbd>退出，Emacs 会将该缓冲区标记为已完成，然后emacsclient 会退出。如果没有其他缓冲区在使用，因该buffer启动LSP（例如 clangd）也会随之退出。</p>
<p>而如果按<kbd>Ctrl</kbd>+<kbd>x</kbd>退出，然后 <kbd>c</kbd>，Emacs会认为这个buffer暂时还不能关闭</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://even629.github.io/">even629</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://even629.com/posts/28521/">https://even629.com/posts/28521/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://even629.com" target="_blank">常想一二，不思八九</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/GNU/">GNU</a><a class="post-meta__tags" href="/tags/tools/">tools</a><a class="post-meta__tags" href="/tags/emacs/">emacs</a></div><div class="post-share"><div class="social-share" data-image="/images/emacs_cover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center liquidGlass-wrapper" id="my-custom-card-author"><div class="liquidGlass-effect"></div><div class="liquidGlass-tint"></div><div class="liquidGlass-shine"></div><div class="liquidGlass-box"><div class="card-info-avatar"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-status-box"><div class="author-status">🐟<span>认真摸鱼中</span></div></div></div><div><div class="author-info-name">even629</div><div class="author-info-description">常想一二，不思八九</div></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">90</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">72</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/even629" target="_blank" title="github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/img/qq.jpg" target="_blank" title="qq"><i class="fa-brands fa-qq" style="color: #000000;"></i></a><a class="social-icon" href="mailto:zhaohang731005515@proton.me" target="_blank" title="email"><i class="fas fa-envelope" style="color: #000000;"></i></a><a class="social-icon" href="https://space.bilibili.com/519280138" target="_blank" title="bilibili"><i class="fa-brands fa-bilibili" style="color: #000000;"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="rss"><i class="fas fa-rss" style="color: #000000;"></i></a></div></div></div><div class="card-widget" id="newYear"><div class="item-headline"><i></i><span></span></div><div class="item-content"> <div class="newYear-slider"> <div class="swiper-wrapper"> <div class="swiper-slide" style="background-image:url(/img/happy_new_year1.jpg)"></div> <div class="swiper-slide" style="background-image:url(/img/happy_new_year2.jpg)"></div> <div class="swiper-slide" style="background-image:url(/img/happy_new_year3.webp)"></div> <div class="swiper-slide" style="background-image:url(/img/happy_new_year4.gif)"></div> </div> </div> <div id="newYear-main"> <div class="mask"></div> <p class="title"></p> <div class="newYear-time"></div> <p class="today" style="text-align: right;"></p> </div> </div></div><div class="sticky_layout"><div class="card-widget liquidGlass-wrapper" id="card-toc"><div class="liquidGlass-effect"></div><div class="liquidGlass-tint"></div><div class="liquidGlass-shine"></div><div class="liquidGlass-box"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">环境</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Windows-Terminal"><span class="toc-number">2.1.</span> <span class="toc-text">Windows Terminal</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arch-Linux"><span class="toc-number">2.2.</span> <span class="toc-text">Arch Linux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ubuntu20-04"><span class="toc-number">2.3.</span> <span class="toc-text">Ubuntu20.04</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Emacs"><span class="toc-number">2.4.</span> <span class="toc-text">Emacs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">2.4.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-1"><span class="toc-number">2.4.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clang-format-%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">.clang-format 配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE%E9%85%8D%E7%BD%AE%E6%80%BB%E8%A7%88"><span class="toc-number">3.</span> <span class="toc-text">快捷键配置总览</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#buffer-menu"><span class="toc-number">3.1.</span> <span class="toc-text">buffer-menu</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#magit"><span class="toc-number">3.2.</span> <span class="toc-text">magit</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">编程设置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A5%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E5%BD%A2%E5%BC%8F%E8%BF%90%E8%A1%8CEmacs"><span class="toc-number">5.</span> <span class="toc-text">以守护进程形式运行Emacs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#systemd"><span class="toc-number">5.1.</span> <span class="toc-text">systemd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell"><span class="toc-number">5.2.</span> <span class="toc-text">Shell</span></a></li></ol></li></ol></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg, rgba(146, 233, 227, 1) 0%, rgba(0, 0, 0, 0) 70%);;"><div id="footer-wrap"><div class="footer-button"><a target="_blank" rel="noopener" href="https://github.com/even629" title="github"><i class="fab fa-github"></i></a><a href="/img/qq.jpg" title="qq"><i class="fa-brands fa-qq"></i></a><a href="mailto:zhaohang731005515@proton.me" title="email"><i class="fas fa-envelope"></i></a><a target="_blank" rel="noopener" href="https://space.bilibili.com/519280138" title="bilibili"><i class="fa-brands fa-bilibili"></i></a><a href="/atom.xml" title="rss"><i class="fas fa-rss"></i></a></div><div class="copyright">&copy;2024 - 2026 By even629</div><p><a style="margin-inline:5px;text-decoration:none;" target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Frame-Hexo-blue.svg" title="博客框架为 Hexo"/></a><a style="margin-inline:5px;text-decoration:none;" target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Theme-Butterfly.svg" title="主题采用 butterfly"/></a><a style="margin-inline:5px;text-decoration:none;" target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Source-Github.svg" title="本站项目由 Github 托管"/></a><a style="margin-inline:5px;text-decoration:none;" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Copyright-BY--NC--SA.4.svg" title="本站采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可"/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="中英转换">中</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span data-zh="新窗口打开" data-en="Open in New Window"></span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span data-zh="转到链接" data-en="Go to Link"></span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span data-zh="复制链接" data-en="Copy Link"></span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span data-zh="复制" data-en="Copy"> </span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.google.com/search?q=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span data-zh="谷歌搜索" data-en="Google Search"></span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span data-zh="转到链接" data-en="Go to Link"></span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span data-zh="粘贴" data-en="Paste"></span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span data-zh="空降评论" data-en="Jump to Comment"></span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa fa-book"></i><span data-zh="阅读模式" data-en="Reading Mode"> </span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span data-zh="保存图片" data-en="Save Image"></span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span data-zh="在新窗口打开" data-en="Open in New Tab"></span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span data-zh="复制图片链接" data-en="Copy Image Link"></span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkmode();"><i class="fa fa-moon"></i><span data-zh="昼夜切换" data-en="Day/Night Mode"></span></a><a class="rightMenu-item" href="javascript:rmf.stopSakura();"><i class="fa-solid fa-feather"></i><span data-zh="樱花特效" data-en="toggle sakura"></span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span data-zh="切换全屏" data-en="Toggle Full Screen"></span></a><a class="rightMenu-item" href="javascript:rmf.switchLanguageMode();"><i class="fas fa-language"></i><span data-zh="语言切换" data-en="Language Switch"></span></a><a class="rightMenu-item" href="/"><i class="fa fa-home"></i><span data-zh="回到首页" data-en="Go to Home"></span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span data-zh="打印页面" data-en="Print Page"></span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/utils.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }
      
      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: 'Ov23liyQTymWpBETlDO8',
      clientSecret: '1512bfe449aac2a5ec3b416df1ce27fb5ddb5db0',
      repo: 'even629.github.io',
      owner: 'even629',
      admin: ['even629'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || 'da77bfd99cbc1c41ab445553386b9ee8'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.0.6/swiper-bundle.min.js"></script><script src="/js/sakura.js"></script><script defer src="/js/right_menu.js"></script><script async src="/js/fps.js"></script><script src="/js/solarlunar.js"></script><script src="/js/newYear.js"></script><script src="/js/pop-up-window.js"></script><script data-pjax src="/js/nav.js"></script><script data-pjax src="/js/music.js"></script><script data-pjax src="/js/btf.js"></script><script data-pjax src="/js/ch_en.js"></script><svg style="display: none">
<filter
  id="glass-distortion"
  x="0%"
  y="0%"
  width="100%"
  height="100%"
  filterUnits="objectBoundingBox"
>
  <feTurbulence
    type="fractalNoise"
    baseFrequency="0.01 0.01"
    numOctaves="1"
    seed="5"
    result="turbulence"
  />
  <!-- Seeds: 14, 17,  -->

  <feComponentTransfer in="turbulence" result="mapped">
    <feFuncR type="gamma" amplitude="1" exponent="10" offset="0.5" />
    <feFuncG type="gamma" amplitude="0" exponent="1" offset="0" />
    <feFuncB type="gamma" amplitude="0" exponent="1" offset="0.5" />
  </feComponentTransfer>

  <feGaussianBlur in="turbulence" stdDeviation="3" result="softMap" />

  <feSpecularLighting
    in="softMap"
    surfaceScale="5"
    specularConstant="1"
    specularExponent="100"
    lighting-color="white"
    result="specLight"
  >
    <fePointLight x="-200" y="-200" z="300" />
  </feSpecularLighting>

  <feComposite
    in="specLight"
    operator="arithmetic"
    k1="0"
    k2="1"
    k3="1"
    k4="0"
    result="litImage"
  />

  <feDisplacementMap
    in="SourceGraphic"
    in2="softMap"
    scale="150"
    xChannelSelector="R"
    yChannelSelector="G"
  />
  </filter>
</svg>
<script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="/css/APlayer.min.css" media="print" onload="this.media='all'"><script src="/js/APlayer.min.js"></script><script src="/js/meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="search" type="text"/></div></div><hr class="custom-hr"/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/c/font_4847823_upluhme7cv.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('container');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '800ms');
    arr[i].setAttribute('data-wow-delay', '0ms');
    arr[i].setAttribute('data-wow-offset', '0');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="/js/wowjs/wow.min.js"></script><script defer src="/js/wowjs/wow_init.js"></script><!-- hexo injector body_end end --></body></html>