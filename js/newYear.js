function getSpringFestivalDate(e){const n=solarlunar.lunar2solar(e,1,1);return n&&-1!==n?new Date(n.cYear,n.cMonth-1,n.cDay):(console.error("无法计算春节日期:",e),null)}function newYear(){const e=document.querySelector("#newYear");if(!e)return;const n=new Date,t=n.getFullYear();let a=null,r=null;for(let e of[t-1,t,t+1]){const t=getSpringFestivalDate(e);if(!t)continue;const o=new Date(t);if(o.setMonth(o.getMonth()+1),n<=o){a=t,r=e;break}}if(!a)return void(e.style.display="none");const o=new Date(a);o.setMonth(o.getMonth()-2);const i=new Date(a);if(i.setMonth(i.getMonth()+1),n<o||n>i)return void(e.style.display="none");e.style.display="";const l=["周日","周一","周二","周三","周四","周五","周六"];function s(e){return e>9?e:"0"+e}!function e(){const n=new Date;document.querySelector("#newYear .today").innerHTML=`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${l[n.getDay()]}`;const t=Math.floor(a.getTime()/1e3)-Math.floor(n.getTime()/1e3),o=document.querySelector("#newYear .title"),i=document.querySelector("#newYear .newYear-time");if(t<0)window.newYearTimer&&(clearInterval(window.newYearTimer),window.newYearTimer=null),o.innerHTML="Happy New Year!",i.innerHTML='<span class="happyNewYear">新年快乐</span>';else if(o.innerHTML=`距离${r}年春节：`,t>86400){const e=Math.ceil(t/86400);i.innerHTML=`<span class="day">${e}</span><span class="unit">天</span>`,window.newYearTimer&&(clearInterval(window.newYearTimer),window.newYearTimer=null)}else{const n=s(Math.floor(t/3600)),a=s(Math.floor(t%3600/60)),r=s(t%60);i.innerHTML=`<span class="time">${n}:${a}:${r}</span>`,window.newYearTimer||(window.newYearTimer=setInterval(e,1e3))}}()}function newYearSwiper(){var e=new Swiper(".newYear-slider",{passiveListeners:!0,loop:!0,autoplay:{disableOnInteraction:!0,delay:5e3},effect:"fade",mousewheel:!0,autoHeight:!0}),n=document.querySelector(".newYear-slider");n&&(n.onmouseenter=()=>e.autoplay.stop(),n.onmouseleave=()=>e.autoplay.start())}function whenDOMReady(){newYear(),newYearSwiper()}whenDOMReady(),document.addEventListener("pjax:complete",whenDOMReady);